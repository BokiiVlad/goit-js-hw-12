{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function pixApi(inputValue, currentPage) {\n    const axiosOptions = {\n        params: {\n            per_page: 15,\n            page: currentPage,\n            key: \"48300565-6dad9db0463f535246b89c980\",\n            q: inputValue,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n        },\n    };\n\n    return axios.get(`https://pixabay.com/api/`, axiosOptions)\n};","import axios from 'axios';\n\nexport function createImg(responseObj) {\n  const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = responseObj;\n\n  return `<a href=\"${largeImageURL}\" class=\"gallery-item\">\n    <div class=\"photo-card\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"360\" />\n      <div class=\"photo-info\">\n        <p class=\"photo-info-item\">Likes<span>${likes}</span></p>\n        <p class=\"photo-info-item\">Views<span>${views}</span></p>\n        <p class=\"photo-info-item\">Comments<span>${comments}</span></p>\n        <p class=\"photo-info-item\">Downloads<span>${downloads}</span></p>\n      </div>\n    </div>\n  </a>`;\n};\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { pixApi } from \"./js/pixabay-api\";\nimport { createImg } from \"./js/render-function\";\n\nconst formField = document.querySelector(\".form\");\nconst subButton = document.querySelector(\".but-style\");\nconst imageField = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader-container\");\nconst butMore = document.querySelector(\".but-more\");\n\n// Модальні вікна картинок\nconst galleryOpen = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt', captionDelay: 250, captions: true,\n});\n\n// Вимикаю лоадер при загрузці сторінки\nloader.style.display = 'none';\n\nlet currentPage = 1;\nlet inputValue = \"\";\n\nconst imageGallery = async (event) => {\n    try {\n        imageField.innerHTML = \"\";\n        loader.style.display = 'flex';\n        event.preventDefault();\n\n        // Оновлюємо значення інпута\n        inputValue = formField.elements.search.value.trim();\n\n        // Перевірка значення інпута\n        if (inputValue === \"\") {\n            loader.style.display = 'none';\n            iziToast.warning({\n                title: 'Warning',\n                message: 'Enter correct data.'\n            });\n            return;\n        }\n\n        // Очищення форми \n        formField.reset();\n        currentPage = 1;\n\n        // Запит до сервера\n        const response = await pixApi(inputValue, currentPage);\n\n        // Перевіряю чи повертаються з сервера картинки\n        if (response.data.total === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            });\n            return;\n        }\n\n        // Генерую HTML\n        const imageArray = response.data.hits.map(el => createImg(el));\n\n        // Вставляю елементи в DOM\n        imageField.innerHTML = imageArray.join('');\n        galleryOpen.refresh();\n\n        // Показую кнопку \"Load more\"\n        if (response.data.totalHits > 15) {\n            butMore.classList.remove(\"is-hidden\");\n            butMore.removeEventListener(\"click\", addPicture);\n            butMore.addEventListener(\"click\", addPicture);\n        }\n    } catch (error) {\n        console.log(error);\n    } finally {\n        // Ховаю кнопку \"Load more\"\n        loader.style.display = 'none';\n    }\n};\n\nasync function addPicture() {\n    try {\n        butMore.classList.add(\"is-hidden\");\n        loader.style.display = 'flex';\n        currentPage++;\n\n        const addResponse = await pixApi(inputValue, currentPage);\n        const imageArrayAdd = addResponse.data.hits.map(el => createImg(el)).join(\"\");\n        // Додаємо розмітку в кінець всіх елементів\n        imageField.insertAdjacentHTML(\"beforeend\", imageArrayAdd);\n        galleryOpen.refresh();\n\n        // Перевіряємо, чи досягли останньої сторінки\n        if (currentPage * 15 >= addResponse.data.totalHits) {\n            iziToast.error({\n                title: 'Error',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n            butMore.classList.add(\"is-hidden\");\n            butMore.removeEventListener(\"click\", addPicture);\n            return;\n        }\n    } catch (error) {\n        console.log(error);\n    } finally {\n        loader.style.display = 'none';\n        // Показуємо кнопку лише якщо не досягнуто останньої сторінки\n        if (currentPage < Math.ceil(addResponse.data.totalHits / 15)) {\n            butMore.classList.remove(\"is-hidden\");\n        }\n    }\n}\n\nformField.addEventListener(\"submit\", imageGallery);\n"],"names":["pixApi","inputValue","currentPage","axiosOptions","axios","createImg","responseObj","largeImageURL","webformatURL","tags","likes","views","comments","downloads","formField","imageField","loader","butMore","galleryOpen","SimpleLightbox","imageGallery","event","iziToast","response","imageArray","el","addPicture","error","addResponse","imageArrayAdd"],"mappings":"owBAEO,eAAeA,EAAOC,EAAYC,EAAa,CAClD,MAAMC,EAAe,CACjB,OAAQ,CACJ,SAAU,GACV,KAAMD,EACN,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACf,CACT,EAEI,OAAOG,EAAM,IAAI,2BAA4BD,CAAY,CAC7D,CCdO,SAASE,EAAUC,EAAa,CACrC,KAAM,CAAE,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EAEjF,MAAO,YAAYC,CAAa;AAAA;AAAA,kBAEhBC,CAAY,UAAUC,CAAI;AAAA;AAAA,gDAEIC,CAAK;AAAA,gDACLC,CAAK;AAAA,mDACFC,CAAQ;AAAA,oDACPC,CAAS;AAAA;AAAA;AAAA,OAI7D,CCJA,MAAMC,EAAY,SAAS,cAAc,OAAO,EAC9B,SAAS,cAAc,YAAY,EACrD,MAAMC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAS,SAAS,cAAc,mBAAmB,EACnDC,EAAU,SAAS,cAAc,WAAW,EAG5CC,EAAc,IAAIC,EAAe,aAAc,CACjD,aAAc,MAAO,aAAc,IAAK,SAAU,EACtD,CAAC,EAGDH,EAAO,MAAM,QAAU,OAEvB,IAAId,EAAc,EACdD,EAAa,GAEjB,MAAMmB,EAAe,MAAOC,GAAU,CAClC,GAAI,CASA,GARAN,EAAW,UAAY,GACvBC,EAAO,MAAM,QAAU,OACvBK,EAAM,eAAc,EAGpBpB,EAAaa,EAAU,SAAS,OAAO,MAAM,KAAI,EAG7Cb,IAAe,GAAI,CACnBe,EAAO,MAAM,QAAU,OACvBM,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,qBACzB,CAAa,EACD,MACH,CAGDR,EAAU,MAAK,EACfZ,EAAc,EAGd,MAAMqB,EAAW,MAAMvB,EAAOC,EAAYC,CAAW,EAGrD,GAAIqB,EAAS,KAAK,QAAU,EAAG,CAC3BD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0EACzB,CAAa,EACD,MACH,CAGD,MAAME,EAAaD,EAAS,KAAK,KAAK,IAAIE,GAAMpB,EAAUoB,CAAE,CAAC,EAG7DV,EAAW,UAAYS,EAAW,KAAK,EAAE,EACzCN,EAAY,QAAO,EAGfK,EAAS,KAAK,UAAY,KAC1BN,EAAQ,UAAU,OAAO,WAAW,EACpCA,EAAQ,oBAAoB,QAASS,CAAU,EAC/CT,EAAQ,iBAAiB,QAASS,CAAU,EAEnD,OAAQC,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACzB,QAAc,CAENX,EAAO,MAAM,QAAU,MAC1B,CACL,EAEA,eAAeU,GAAa,CACxB,GAAI,CACAT,EAAQ,UAAU,IAAI,WAAW,EACjCD,EAAO,MAAM,QAAU,OACvBd,IAEA,MAAM0B,EAAc,MAAM5B,EAAOC,EAAYC,CAAW,EAClD2B,EAAgBD,EAAY,KAAK,KAAK,IAAIH,GAAMpB,EAAUoB,CAAE,CAAC,EAAE,KAAK,EAAE,EAM5E,GAJAV,EAAW,mBAAmB,YAAac,CAAa,EACxDX,EAAY,QAAO,EAGfhB,EAAc,IAAM0B,EAAY,KAAK,UAAW,CAChDN,EAAS,MAAM,CACX,MAAO,QACP,QAAS,4DACzB,CAAa,EACDL,EAAQ,UAAU,IAAI,WAAW,EACjCA,EAAQ,oBAAoB,QAASS,CAAU,EAC/C,MACH,CACJ,OAAQC,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACzB,QAAc,CACNX,EAAO,MAAM,QAAU,OAEnBd,EAAc,KAAK,KAAK,YAAY,KAAK,UAAY,EAAE,GACvDe,EAAQ,UAAU,OAAO,WAAW,CAE3C,CACL,CAEAH,EAAU,iBAAiB,SAAUM,CAAY"}